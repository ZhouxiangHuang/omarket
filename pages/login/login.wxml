<!--index.wxml-->
<view class="container">
  <view class="login-option-nav">
    <block>
      <text id='user' bindtap="changeRole" style="background-color:{{userColor}}; color:{{userFont}}">用户</text>
    </block>
    <block>
      <text id='merchant' bindtap="changeRole" style="background-color:{{merchantColor}}; color:{{merchantFont}}">商户</text>
    </block>
  </view>

  <view class="userinfo">
    <block wx:if="{{user.currentRole === 2}}">
        <image  bindtap="bindViewTap" class="userinfo-avatar" src="{{user.avatarUrl}}" background-size="cover"></image>
        <text class="userinfo-nickname">{{user.nickName}}</text>    
    </block>
    <block wx:else>
        <block wx:if="{{user.merchantInfo.profileUrl}}">
            <image bindtap="bindViewTap" class="merchant-avatar" src="{{user.merchantInfo.profileUrl}}" background-size="cover"></image>              
        </block>
        <block wx:else>
            <image bindtap="bindViewTap" class="merchant-avatar" src="/images/no-store.png" background-size="cover"></image>          
        </block>

        <block wx:if="{{user.merchantInfo.storeName}}">
            <text class="userinfo-nickname">{{user.merchantInfo.storeName}}</text>
        </block>
        <block wx:else>
            <text class="userinfo-nickname">{{user.nickName}}</text>
        </block>
    </block>
  </view>

  <view class="form" wx:if="{{user.currentRole === 1 && !user.isMerchant}}"> 
         <view class='row underline'>
            <label>商铺名称</label>
            <input type="text" bindinput="bindStoreName" placeholder="请输入商铺名称"/>
        </view>
         <view class='row underline'>
            <label>地址</label>
            <input style="width: 450rpx;"type="text" bindinput="bindAddress" placeholder="请输入地址"/>
        </view>
         <view class='row'>
            <label>联系电话</label>
            <input type="number" bindinput="bindMobile" placeholder="请输入联系电话"/>
            <picker id="code" range = "{{codes}}" value="{{telCodeIndex}}" range-key="name" bindchange="selectCodes">
              <view class="content">+{{codes[telCodeIndex].tel_code}}          
                <image src="/images/triangle.png" />
              </view>
            </picker>   
        </view>
  </view>

  <view class='register-button'>
    <button open-type="getUserInfo" bindtap="login" class='bind-user'>授权绑定微信</button>
  </view>
</view>
