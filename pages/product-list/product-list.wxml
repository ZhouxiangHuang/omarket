<view class="container product-list-main">
    <view class="merchant-profile underline">
        <view class="merchant-logo">
            <image wx:if="{{merchant.image_url}}" class="logo" src="{{merchant.image_url}}" />
            <image wx:if="{{!merchant.image_url}}" class="logo" src="/images/no-store.png" />            
        </view>
        <view class="merchant-profile">
            <view id="merchant-name">{{merchant.store_name}}</view>
            <view id="merchant-hours">营业时间: {{merchant.open_at}} - {{merchant.closed_at}}</view>                 
            <view id="merchant-address">
                <view class="highlight">地址</view>
                <text>{{merchant.address}}</text>
            </view>   
            <view id="merchant-announcement">
                <view class="highlight">公告</view>
                <text>{{merchant.announcement}}</text>
            </view>  
            <view wx:if="{{isOwner}}" class="edit-profile-btn" bindtap="editMerchant">
                <text>编辑</text>
                <image src="/images/edit.png"/>
            </view>
            <view wx:if="{{!isOwner}}" class="call-merchant-btn" bindtap="callMerchant" data-tel="{{merchant.mobile}}">
                <text>联系商家</text>
                <image src="/images/phone.png"/>
            </view>
        </view>        
    </view>
    <view class="filter underline">
      <picker class="selection border-right" bindchange="orderByTime" range = "{{timeRange}}" range-key="name">
            <view>
                <text>{{timeRange[timeIndex].name || '时间排序'}}</text>
                <image class="selector" src="/images/triangle.png"/>
            </view>
        </picker>
         <picker class="selection" bindchange="orderByPrice" range = "{{priceRange}}" range-key="name">
            <view>
                <text>{{priceRange[priceIndex].name || '价格排序'}}</text>
                <image class="selector" src="/images/triangle.png"/>
            </view>
        </picker>    
    </view>
    <view class="products">
        <view class="categories">
            <view class="category underline" wx:for="{{categories}}" wx:key="{{categories}}" bindtap="selectCategory" data-category="{{item.id}}" style="background-color: {{item.color}}">
                <image class="fire" wx:if="{{item.is_hot}}" src="/images/hot.png"/>
                <text wx:if="{{!item.is_hot}}">{{item.name}}</text>
                <text class="hot-text" wx:if="{{item.is_hot}}">{{item.name}}</text>                
            </view>
            <view wx:if="{{isOwner}}" class="category underline" id="add-category" bindtap="editCatogory">
                <view class="circle">
                    <image src="/images/add.png" mode="center"/>
                </view>
                <text id="add-text">添加</text>
            </view>
        </view>
        <view class="product" wx:for="{{productList}}" wx:key="{{productList}}" bindtap="checkProductDetal" data-no="{{item}}">
            <image class="product-img"  wx:if="{{item.images[0].url}}" src="{{item.images[0].url}}" />   
            <image class="product-img"  wx:if="{{!item.images[0].url}}" src="/images/no-image-sm.png"/>         
            <view class="product-detail">
                <view class="name">{{item.name}}</view>
                <view class="production-intro">{{item.description}}</view>
                <view class="price">￥{{item.price}}</view>
            </view>   
        </view>
        <view wx:if="{{isOwner}}" class="add-product-btn" bindtap="editProducts">
            <image src="/images/add.png" mode="center"/>
        </view>
    </view>
</view>
